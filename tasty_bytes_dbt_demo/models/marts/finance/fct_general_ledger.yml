version: 2

models:
  - name: fct_general_ledger
    description: "Fact table containing all general ledger transactions with denormalized dimensions for reporting. Incrementally loaded based on modification timestamp."
    
    config:
      materialized: incremental
      cluster_by: ['accounting_date', 'main_account']
    
    columns:
      - name: account_entry_recid
        description: "Unique identifier for the account entry (Primary Key)"
        tests:
          - unique
          - not_null
      
      - name: accounting_date
        description: "The date when the entry is recorded in accounting"
        tests:
          - not_null
      
      - name: journal_number
        description: "Journal batch number"
        tests:
          - not_null
      
      - name: main_account
        description: "Main account number from chart of accounts"
        tests:
          - not_null
      
      - name: accounting_amount
        description: "Transaction amount in accounting currency (can be negative for credits)"
        tests:
          - not_null
      
      - name: debit_amount
        description: "Debit amount (positive amounts only, 0 for credits)"
        tests:
          - not_null
      
      - name: credit_amount
        description: "Credit amount (absolute value of negative amounts, 0 for debits)"
        tests:
          - not_null
      
      - name: last_modified_at
        description: "Timestamp of last modification in source system"
        tests:
          - not_null